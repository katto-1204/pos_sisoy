{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport Link from \"next/link\"\r\nimport { storage, type Booking } from \"@/lib/storage\"\r\n\r\nexport default function DashboardPage() {\r\n  const [bookings, setBookings] = useState<Booking[]>([])\r\n  const [stats, setStats] = useState({\r\n    todayBookings: 0,\r\n    availableRooms: 0,\r\n    occupiedRooms: 0,\r\n    totalSales: 0,\r\n  })\r\n\r\n  useEffect(() => {\r\n    const allBookings = storage.getBookings()\r\n    setBookings(allBookings)\r\n\r\n    const today = new Date().toISOString().split(\"T\")[0]\r\n    const todayBookings = allBookings.filter((b) => b.dateFrom === today)\r\n\r\n    const accommodations = storage.getAccommodations()\r\n    const occupiedToday = new Set(\r\n      allBookings\r\n        .filter((b) => {\r\n          const from = new Date(b.dateFrom)\r\n          const to = new Date(b.dateTo)\r\n          const now = new Date(today)\r\n          return from <= now && now < to && b.status !== \"cancelled\"\r\n        })\r\n        .map((b) => b.accommodationId),\r\n    ).size\r\n\r\n    const totalSales = allBookings.filter((b) => b.paymentStatus === \"paid\").reduce((sum, b) => sum + b.totalAmount, 0)\r\n\r\n    setStats({\r\n      todayBookings: todayBookings.length,\r\n      availableRooms: accommodations.length - occupiedToday,\r\n      occupiedRooms: occupiedToday,\r\n      totalSales,\r\n    })\r\n  }, [])\r\n\r\n  const StatCard = ({ title, value }: { title: string; value: number | string }) => (\r\n    <div className=\"bg-white border border-(--gray-light) rounded p-6 shadow-sm\">\r\n      <p className=\"text-sm text-(--gray-dark) mb-2\">{title}</p>\r\n      <p className=\"text-3xl font-bold text-(--primary-blue)\">{value}</p>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold text-(--primary-blue)\">Dashboard</h1>\r\n\r\n      {/* Stats Grid */}\r\n      <div className=\"grid grid-cols-4 gap-4\">\r\n        <StatCard title=\"Bookings Today\" value={stats.todayBookings} />\r\n        <StatCard title=\"Available Rooms\" value={stats.availableRooms} />\r\n        <StatCard title=\"Occupied Rooms\" value={stats.occupiedRooms} />\r\n        <StatCard title=\"Total Sales\" value={`â‚±${stats.totalSales.toLocaleString()}`} />\r\n      </div>\r\n\r\n      {/* Main Section */}\r\n      <div className=\"grid grid-cols-3 gap-6\">\r\n        {/* Bookings Today Table */}\r\n        <div className=\"col-span-2 bg-white border border-(--gray-light) rounded p-6\">\r\n          <h2 className=\"text-lg font-bold text-(--gray-dark) mb-4\">Today's Bookings</h2>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"border-b border-(--gray-light)\">\r\n                  <th className=\"text-left py-2 px-2 font-bold text-(--gray-dark)\">Time</th>\r\n                  <th className=\"text-left py-2 px-2 font-bold text-(--gray-dark)\">Client</th>\r\n                  <th className=\"text-left py-2 px-2 font-bold text-(--gray-dark)\">Room</th>\r\n                  <th className=\"text-left py-2 px-2 font-bold text-(--gray-dark)\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {bookings.slice(0, 5).map((b) => (\r\n                  <tr key={b.id} className=\"border-b border-(--gray-light)\">\r\n                    <td className=\"py-3 px-2\">{new Date(b.createdAt).toLocaleTimeString()}</td>\r\n                    <td className=\"py-3 px-2\">\r\n                      {storage.getClients().find((c) => c.id === b.clientId)?.firstName || \"N/A\"}\r\n                    </td>\r\n                    <td className=\"py-3 px-2\">\r\n                      {storage.getAccommodations().find((a) => a.id === b.accommodationId)?.name || \"N/A\"}\r\n                    </td>\r\n                    <td className=\"py-3 px-2\">\r\n                      <span\r\n                        className={`px-2 py-1 rounded text-xs font-bold ${\r\n                          b.status === \"confirmed\"\r\n                            ? \"bg-green-100 text-green\"\r\n                            : b.status === \"pending\"\r\n                              ? \"bg-yellow-100 text-yellow-800\"\r\n                              : \"bg-gray-100 text-gray-800\"\r\n                        }`}\r\n                      >\r\n                        {b.status}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions Panel */}\r\n        <div className=\"bg-white border border-(--gray-light) rounded p-6 h-fit space-y-3\">\r\n          <h2 className=\"text-lg font-bold text-(--gray-dark) mb-4\">Quick Actions</h2>\r\n          <Link\r\n            href=\"/booking/new\"\r\n            className=\"block w-full py-3 bg-(--yellow) text-(--gray-dark) font-bold rounded text-center hover:bg-yellow-400 transition-colors\"\r\n          >\r\n            New Booking\r\n          </Link>\r\n          <Link\r\n            href=\"/accommodations\"\r\n            className=\"block w-full py-2 bg-(--primary-blue) text-white font-bold rounded text-center hover:bg-blue-900 transition-colors\"\r\n          >\r\n            Accommodations\r\n          </Link>\r\n          <Link\r\n            href=\"/reports\"\r\n            className=\"block w-full py-2 bg-(--primary-blue) text-white font-bold rounded text-center hover:bg-blue-900 transition-colors\"\r\n          >\r\n            Reports\r\n          </Link>\r\n          <Link\r\n            href=\"/bookings\"\r\n            className=\"block w-full py-2 bg-(--primary-blue) text-white font-bold rounded text-center hover:bg-blue-900 transition-colors\"\r\n          >\r\n            All Bookings\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}