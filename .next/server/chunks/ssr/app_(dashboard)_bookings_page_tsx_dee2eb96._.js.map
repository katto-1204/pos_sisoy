{"version":3,"sources":["../../../../app/%28dashboard%29/bookings/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport Link from \"next/link\"\r\nimport { storage, type Booking } from \"@/lib/storage\"\r\n\r\ntype FilterStatus = \"all\" | \"today\" | \"upcoming\" | \"completed\" | \"cancelled\"\r\n\r\nexport default function BookingsPage() {\r\n  const [bookings, setBookings] = useState<Booking[]>([])\r\n  const [filter, setFilter] = useState<FilterStatus>(\"all\")\r\n\r\n  useEffect(() => {\r\n    const allBookings = storage.getBookings()\r\n    setBookings(allBookings)\r\n  }, [])\r\n\r\n  const getFilteredBookings = () => {\r\n    const today = new Date().toISOString().split(\"T\")[0]\r\n    const now = new Date()\r\n\r\n    return bookings.filter((b) => {\r\n      switch (filter) {\r\n        case \"today\":\r\n          return b.dateFrom === today\r\n        case \"upcoming\":\r\n          return new Date(b.dateFrom) > now && b.status !== \"cancelled\"\r\n        case \"completed\":\r\n          return b.status === \"completed\"\r\n        case \"cancelled\":\r\n          return b.status === \"cancelled\"\r\n        default:\r\n          return true\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (confirm(\"Are you sure?\")) {\r\n      storage.deleteBooking(id)\r\n      setBookings(storage.getBookings())\r\n    }\r\n  }\r\n\r\n  const handleStatusChange = (id: string, newStatus: string) => {\r\n    storage.updateBooking(id, { status: newStatus as any })\r\n    setBookings(storage.getBookings())\r\n  }\r\n\r\n  const filteredBookings = getFilteredBookings()\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"confirmed\":\r\n        return \"bg-green-100 text-green\"\r\n      case \"pending\":\r\n        return \"bg-yellow-100 text-yellow-800\"\r\n      case \"completed\":\r\n        return \"bg-blue-100 text-blue-800\"\r\n      case \"cancelled\":\r\n        return \"bg-red-100 text-red\"\r\n      default:\r\n        return \"bg-gray-100 text-gray-800\"\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h1 className=\"text-3xl font-bold text-(--primary-blue)\">Bookings</h1>\r\n        <Link\r\n          href=\"/booking/new\"\r\n          className=\"px-4 py-2 bg-(--yellow) text-(--gray-dark) rounded font-bold hover:bg-yellow-400\"\r\n        >\r\n          New Booking\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex gap-2 bg-white p-4 rounded border border-(--gray-light)\">\r\n        {[\"all\", \"today\", \"upcoming\", \"completed\", \"cancelled\"].map((f) => (\r\n          <button\r\n            key={f}\r\n            onClick={() => setFilter(f as FilterStatus)}\r\n            className={`px-4 py-2 rounded font-bold capitalize text-sm transition-colors ${\r\n              filter === f ? \"bg-(--primary-blue) text-white\" : \"bg-(--gray-bg) text-(--gray-dark) hover:bg-gray-300\"\r\n            }`}\r\n          >\r\n            {f}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"bg-white border border-(--gray-light) rounded overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-(--gray-bg) border-b border-(--gray-light)\">\r\n            <tr>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">ID</th>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">Client</th>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">Room</th>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">Dates</th>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">Amount</th>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">Status</th>\r\n              <th className=\"text-left py-3 px-4 font-bold text-(--gray-dark)\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredBookings.map((b) => {\r\n              const client = storage.getClients().find((c) => c.id === b.clientId)\r\n              const room = storage.getAccommodations().find((a) => a.id === b.accommodationId)\r\n              return (\r\n                <tr key={b.id} className=\"border-b border-(--gray-light) hover:bg-(--gray-bg)\">\r\n                  <td className=\"py-3 px-4 text-sm font-mono\">{b.id.substring(0, 8)}</td>\r\n                  <td className=\"py-3 px-4 text-sm\">\r\n                    {client?.firstName} {client?.lastName}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-sm\">{room?.name}</td>\r\n                  <td className=\"py-3 px-4 text-sm\">\r\n                    {b.dateFrom} to {b.dateTo}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-sm font-bold\">â‚±{b.totalAmount.toLocaleString()}</td>\r\n                  <td className=\"py-3 px-4\">\r\n                    <span className={`px-2 py-1 rounded text-xs font-bold ${getStatusColor(b.status)}`}>\r\n                      {b.status}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-sm space-x-2\">\r\n                    <Link href={`/booking/${b.id}`} className=\"text-(--primary-blue) hover:underline\">\r\n                      View\r\n                    </Link>\r\n                    <button onClick={() => handleDelete(b.id)} className=\"text-red hover:underline\">\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {filteredBookings.length === 0 && (\r\n        <div className=\"text-center py-12 bg-(--gray-bg) rounded\">\r\n          <p className=\"text-(--gray-dark)\">No bookings found.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIe,SAAS,IACtB,IASQ,EACA,EAVF,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAChD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAe,OAEnD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,EADoB,EAAA,OAAO,CAAC,AAChB,WAD2B,GAEzC,EAAG,EAAE,EAkCL,IAAM,KA/BU,IAAI,OAAO,GA+BF,QA/Ba,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GACxC,IAAI,KAET,EAAS,MAAM,CAAC,AAAC,IACtB,OAAQ,GACN,IAAK,QACH,OAAO,EAAE,QAAQ,GAAK,CACxB,KAAK,WACH,OAAO,IAAI,KAAK,EAAE,QAAQ,EAAI,GAAoB,cAAb,EAAE,MAAM,AAC/C,KAAK,YACH,MAAoB,cAAb,EAAE,MAAM,AACjB,KAAK,YACH,MAAoB,cAAb,EAAE,MAAM,AACjB,SACE,OAAO,CACX,CACF,IAgCF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,aACzD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,eACL,UAAU,4FACX,mBAMH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wEACZ,CAAC,MAAO,QAAS,WAAY,YAAa,YAAY,CAAC,GAAG,CAAC,AAAC,GAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAU,GACzB,UAAW,CAAC,iEAAiE,EAC3E,IAAW,EAAI,iCAAmC,sDAAA,CAClD,UAED,GANI,MAYX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,mBACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,yDACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,OACjE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,WACjE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,SACjE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,UACjE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,WACjE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,WACjE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DAAmD,iBAGrE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAiB,GAAG,CAAC,AAAC,IACrB,IAAM,EAAS,EAAA,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAE,QAAQ,EAC7D,EAAO,EAAA,OAAO,CAAC,iBAAiB,GAAG,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAE,eAAe,EAC/E,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAc,UAAU,gEACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA+B,EAAE,EAAE,CAAC,SAAS,CAAC,EAAG,KAC/D,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8BACX,GAAQ,UAAU,IAAE,GAAQ,YAE/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAqB,GAAM,OACzC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8BACX,EAAE,QAAQ,CAAC,OAAK,EAAE,MAAM,IAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wCAA8B,IAAE,EAAE,WAAW,CAAC,cAAc,MAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,oCAAoC,EAAE,CAxEnD,AAAC,IACtB,OAAQ,GACN,IAAK,YACH,MAAO,yBACT,KAAK,UACH,MAAO,+BACT,KAAK,YACH,MAAO,2BACT,KAAK,YACH,MAAO,qBACT,SACE,MAAO,2BACX,CACF,GA2DyF,EAAE,MAAM,EAAA,CAAG,UAC/E,EAAE,MAAM,KAGb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,SAAS,EAAE,EAAE,EAAE,CAAA,CAAE,CAAE,UAAU,iDAAwC,SAGlF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,cA9FnB,EA8FgC,EAAE,EAAE,MA7FpD,QAAQ,kBAAkB,CAC5B,EAAA,OAAO,CAAC,aAAa,CAAC,GACtB,EAAY,EAAA,OAAO,CAAC,WAAW,OA2F0B,UAAU,oCAA2B,gBAnB3E,EAAE,EAAE,CAyBjB,UAKuB,IAA5B,EAAiB,MAAM,EACtB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,2BAK5C"}