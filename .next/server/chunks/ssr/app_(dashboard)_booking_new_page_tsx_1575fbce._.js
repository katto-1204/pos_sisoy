module.exports=[28890,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(77577);function f({selectedClientId:a,onClientSelect:d,clients:f,onClientAdded:g}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",address:""}),l=async a=>{a.preventDefault(),"undefined"!=typeof process&&process.env;let b={id:Date.now().toString(),...j};e.storage.addClient(b),d(b.id),g(),k({firstName:"",lastName:"",email:"",phoneNumber:"",address:""}),i(!1)};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-(--gray-dark)",children:"Customer Information"}),h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("input",{type:"text",placeholder:"First Name",value:j.firstName,onChange:a=>k({...j,firstName:a.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,b.jsx)("input",{type:"text",placeholder:"Last Name",value:j.lastName,onChange:a=>k({...j,lastName:a.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,b.jsx)("input",{type:"email",placeholder:"Email",value:j.email,onChange:a=>k({...j,email:a.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,b.jsx)("input",{type:"tel",placeholder:"Phone Number",value:j.phoneNumber,onChange:a=>k({...j,phoneNumber:a.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,b.jsx)("input",{type:"text",placeholder:"Address",value:j.address,onChange:a=>k({...j,address:a.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,b.jsx)("button",{onClick:l,className:"w-full py-2 bg-(--yellow) text-(--gray-dark) rounded font-bold text-sm hover:bg-yellow-400",children:"Save Customer"}),(0,b.jsx)("button",{onClick:()=>i(!1),className:"w-full py-2 bg-(--gray-bg) border border-(--gray-light) rounded text-sm",children:"Cancel"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-(--gray-dark) mb-2",children:"Select or Add Customer"}),(0,b.jsxs)("select",{value:a,onChange:a=>d(a.target.value),className:"w-full px-3 py-2 border border-(--gray-light) rounded focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Choose customer..."}),f.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.firstName," ",a.lastName," - ",a.phoneNumber]},a.id))]})]}),(0,b.jsx)("button",{onClick:()=>i(!0),className:"w-full py-2 bg-(--primary-blue) text-white rounded hover:bg-blue-900 text-sm",children:"Add New Customer"})]}),a&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-(--gray-bg) rounded",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-(--primary-blue)",children:"Customer Selected"}),(0,b.jsxs)("p",{className:"text-sm text-(--gray-dark)",children:["ID: ",a]})]})]})}function g({room:a,onClose:d,onConfirm:e}){let[f,g]=(0,c.useState)(!1);return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-blue-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.type})]}),(0,b.jsxs)("div",{className:"space-y-4 border-y border-gray-200 py-4",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:"Guests"}),(0,b.jsxs)("span",{className:"font-bold text-blue-900",children:[a.capacity," maximum"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:"Price Per Night"}),(0,b.jsxs)("span",{className:"font-bold text-yellow-500 text-lg",children:["₱",a.pricePerNight]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:"Status"}),(0,b.jsx)("span",{className:`font-bold px-3 py-1 rounded text-sm ${"active"===a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:"active"===a.status?"Available":"Maintenance"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-gray-800 mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.description})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:d,className:"flex-1 py-2 border border-gray-300 rounded font-bold text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{g(!0),e(a)},className:"flex-1 py-2 bg-yellow-400 rounded font-bold text-blue-900 hover:bg-yellow-500",children:"Select This Room"})]})]})})}function h({checkIn:a,checkOut:d,selectedRoomId:f,onRoomSelect:h}){let[i,j]=(0,c.useState)(null),k=e.storage.getAccommodations(),l=e.storage.getBookings().filter(a=>"cancelled"!==a.status);console.log("[v0] Total accommodations:",k.length),console.log("[v0] All accommodations:",k);let m=k.filter(a=>"Room"===a.type).sort((a,b)=>(Number.parseInt(a.name.split(" ")[1])||0)-(Number.parseInt(b.name.split(" ")[1])||0)),n=k.filter(a=>"Cottage"===a.type&&a.capacity<=5).sort((a,b)=>(Number.parseInt(a.name.split(" ").pop())||0)-(Number.parseInt(b.name.split(" ").pop())||0)),o=k.filter(a=>"Cottage"===a.type&&a.capacity>5).sort((a,b)=>(Number.parseInt(a.name.split(" ").pop())||0)-(Number.parseInt(b.name.split(" ").pop())||0)),p=k.filter(a=>"Villa"===a.type).sort((a,b)=>(Number.parseInt(a.name.split(" ")[1])||0)-(Number.parseInt(b.name.split(" ")[1])||0));console.log("[v0] Rooms:",m.length,m),console.log("[v0] Cottages Regular:",n.length,n),console.log("[v0] Cottages Large:",o.length,o),console.log("[v0] Villas:",p.length,p);let q=({room:c})=>{let e=(b=>{let c=k.find(a=>a.id===b);if(c?.status==="maintenance")return"maintenance";if(!a||!d)return"available";let e=new Date(a),f=new Date(d);return l.some(a=>{if(a.accommodationId!==b)return!1;let c=new Date(a.dateFrom),d=new Date(a.dateTo);return!(f<=c||e>=d)})?"booked":"available"})(c.id),g=f===c.id;return(0,b.jsx)("button",{onClick:()=>{"maintenance"!==e&&(j(c),"available"===e&&h(c.id))},disabled:"maintenance"===e,className:`p-3 rounded-lg transition-all transform hover:scale-105 ${{available:"bg-white border-2 border-gray-300 hover:border-blue-500 hover:shadow-md",booked:"bg-green-500 border-2 border-green-600 text-white",maintenance:"bg-gray-400 border-2 border-gray-500 opacity-70 cursor-not-allowed"}[e]} ${g?"ring-4 ring-yellow-400 ring-offset-2":""}`,children:(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("h4",{className:`text-xl font-bold ${"booked"===e?"text-white":"text-blue-900"}`,children:c.name}),(0,b.jsx)("p",{className:`text-xs ${"booked"===e?"text-white":"text-gray-600"}`,children:c.type}),(0,b.jsxs)("div",{className:`mt-2 flex items-center justify-between text-sm ${"booked"===e?"text-white":""}`,children:[(0,b.jsxs)("span",{className:`font-bold ${"booked"===e?"text-white":"text-blue-600"}`,children:["₱",c.pricePerNight]}),(0,b.jsx)("span",{className:`text-xs font-bold px-2 py-1 rounded ${"available"===e?"bg-gray-100 text-green-600 border border-green-400":"booked"===e?"bg-white text-green-600 font-bold":"bg-gray-600 text-white"}`,children:"available"===e?"FREE":"booked"===e?"✓ BOOKED":"MAINTENANCE"})]}),(0,b.jsxs)("p",{className:`text-xs mt-1 ${"booked"===e?"text-white":"text-gray-600"}`,children:[c.capacity," guests"]})]})})};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-blue-900",children:"Room & Accommodation Availability"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"STANDARD ROOMS"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",m.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:m.map(a=>(0,b.jsx)(q,{room:a},a.id))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"COTTAGES (1-5 PAX)"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",n.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:n.map(a=>(0,b.jsx)(q,{room:a},a.id))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"COTTAGES (15+ PAX)"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",o.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:o.map(a=>(0,b.jsx)(q,{room:a},a.id))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"VILLAS"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",p.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:p.map(a=>(0,b.jsx)(q,{room:a},a.id))})]}),i&&(0,b.jsx)(g,{room:i,onClose:()=>j(null),onConfirm:a=>{h(a.id),j(null)}})]})}function i({checkIn:a,checkOut:c,nights:d,room:e,totalAmount:f}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-blue-900",children:"Booking Summary"}),(0,b.jsxs)("div",{className:"space-y-3 border-b border-gray-200 pb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Check-in"}),(0,b.jsx)("span",{className:"font-bold text-gray-900",children:a?new Date(a).toLocaleDateString():"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Check-out"}),(0,b.jsx)("span",{className:"font-bold text-gray-900",children:c?new Date(c).toLocaleDateString():"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Room"}),(0,b.jsx)("span",{className:"font-bold text-gray-900",children:e?.name||"Not selected"})]})]}),(0,b.jsxs)("div",{className:"space-y-3 border-b border-gray-200 pb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Rate per night"}),(0,b.jsxs)("span",{className:"font-bold text-blue-600",children:["₱",e?.pricePerNight?.toLocaleString()||"0"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Number of nights"}),(0,b.jsx)("span",{className:"font-bold text-gray-900",children:d})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm bg-yellow-50 px-3 py-2 rounded-lg",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-bold text-yellow-600",children:["₱",f.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 text-center border border-blue-200",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-2 uppercase tracking-wide font-medium",children:"Total Amount Due"}),(0,b.jsxs)("p",{className:"text-4xl font-bold text-blue-900",children:["₱",f.toLocaleString()]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[d," night",1!==d?"s":""]})]})]})}function j(){let a=(0,d.useRouter)(),[g,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)([]);(0,c.useEffect)(()=>{r(e.storage.getClients())},[]);let s=()=>{if(!k||!m)return 0;let a=new Date(k);return Math.floor((new Date(m).getTime()-a.getTime())/864e5)},t=()=>e.storage.getAccommodations().find(a=>a.id===o),u=()=>{let a=t();return a?a.pricePerNight*s():0};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-blue-900",children:"New Booking"}),(0,b.jsx)("button",{onClick:()=>a.back(),className:"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded hover:bg-gray-200 transition-colors",children:"Cancel"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 lg:sticky lg:top-6 lg:h-fit",children:(0,b.jsx)(f,{selectedClientId:g,onClientSelect:j,clients:e.storage.getClients(),onClientAdded:()=>r(e.storage.getClients())})})}),(0,b.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:(0,b.jsx)(h,{checkIn:k,checkOut:m,selectedRoomId:o,onRoomSelect:p})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:"Select Dates"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in Date"}),(0,b.jsx)("input",{type:"date",value:k,onChange:a=>l(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out Date"}),(0,b.jsx)("input",{type:"date",value:m,onChange:a=>n(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,b.jsx)(i,{checkIn:k,checkOut:m,nights:s(),room:t(),totalAmount:u()})})]}),(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("button",{onClick:()=>{if(!g||!k||!m||!o)return void alert("Please fill all fields and select a room");let b={id:Date.now().toString(),clientId:g,accommodationId:o,dateFrom:k,dateTo:m,status:"pending",totalAmount:u(),createdAt:new Date().toISOString(),paymentStatus:"unpaid"};sessionStorage.setItem("tempBooking",JSON.stringify(b)),a.push(`/booking/payment?bookingId=${b.id}&amount=${b.totalAmount}`)},className:"w-full py-4 bg-yellow-400 text-blue-900 font-bold text-lg rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!g||!k||!m||!o,children:["Proceed to Payment (",s()," nights - ₱",u().toLocaleString(),")"]})})]})]})]})}a.s(["default",()=>j],28890)}];

//# sourceMappingURL=app_%28dashboard%29_booking_new_page_tsx_1575fbce._.js.map