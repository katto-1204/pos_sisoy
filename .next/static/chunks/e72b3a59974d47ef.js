(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37058,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(56563);function l(){let e,l,r,o,d,n,i,[c,m]=(0,a.useState)([]),[x,g]=(0,a.useState)({start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});(0,a.useEffect)(()=>{m(s.storage.getBookings())},[]);let h=()=>c.filter(e=>{let t=e.dateFrom;return t>=x.start&&t<=x.end&&"cancelled"!==e.status}),b=(l=(e=h()).length,{totalBookings:l,totalRevenue:r=e.filter(e=>"paid"===e.paymentStatus).reduce((e,t)=>e+t.totalAmount,0),avgBookingValue:l>0?r/l:0}),p=(o=h(),d={},o.forEach(e=>{d[e.dateFrom]||(d[e.dateFrom]=0),d[e.dateFrom]+=e.totalAmount}),Object.entries(d).sort(([e],[t])=>e.localeCompare(t)).slice(-7)),u=(n=h(),i={},n.forEach(e=>{let t=s.storage.getAccommodations().find(t=>t.id===e.accommodationId);t&&(i[t.name]||(i[t.name]={count:0,revenue:0}),i[t.name].count++,i[t.name].revenue+=e.totalAmount)}),i);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-(--primary-blue)",children:"Reports"}),(0,t.jsxs)("div",{className:"bg-white border border-(--gray-light) rounded p-4 flex gap-4 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-(--gray-dark) mb-1",children:"From"}),(0,t.jsx)("input",{type:"date",value:x.start,onChange:e=>g({...x,start:e.target.value}),className:"px-3 py-2 border border-(--gray-light) rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-(--gray-dark) mb-1",children:"To"}),(0,t.jsx)("input",{type:"date",value:x.end,onChange:e=>g({...x,end:e.target.value}),className:"px-3 py-2 border border-(--gray-light) rounded"})]}),(0,t.jsx)("button",{onClick:()=>{let e=new Blob([[["Date","Client","Accommodation","Amount","Status"],...h().map(e=>{let t=s.storage.getClients().find(t=>t.id===e.clientId),a=s.storage.getAccommodations().find(t=>t.id===e.accommodationId);return[e.dateFrom,`${t?.firstName} ${t?.lastName}`,a?.name,e.totalAmount,e.status]})].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`report-${x.start}.csv`,a.click()},className:"px-4 py-2 bg-(--yellow) text-(--gray-dark) rounded font-bold hover:bg-yellow-400",children:"Export CSV"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white border border-(--gray-light) rounded p-6",children:[(0,t.jsx)("p",{className:"text-sm text-(--gray-dark) mb-1",children:"Total Bookings"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-(--primary-blue)",children:b.totalBookings})]}),(0,t.jsxs)("div",{className:"bg-white border border-(--gray-light) rounded p-6",children:[(0,t.jsx)("p",{className:"text-sm text-(--gray-dark) mb-1",children:"Total Revenue"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-(--primary-blue)",children:["₱",b.totalRevenue.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"bg-white border border-(--gray-light) rounded p-6",children:[(0,t.jsx)("p",{className:"text-sm text-(--gray-dark) mb-1",children:"Avg. Booking Value"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-(--primary-blue)",children:["₱",Math.round(b.avgBookingValue).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"bg-white border border-(--gray-light) rounded p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-(--gray-dark) mb-4",children:"Last 7 Days Sales"}),(0,t.jsx)("div",{className:"space-y-2",children:p.map(([e,a])=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"w-24 text-sm font-bold",children:e}),(0,t.jsx)("div",{className:"flex-1 bg-(--gray-bg) rounded h-8 relative overflow-hidden",children:(0,t.jsx)("div",{className:"bg-(--yellow) h-full transition-all",style:{width:`${Math.min(100,a/Math.max(...p.map(e=>e[1]))*100)}%`}})}),(0,t.jsxs)("span",{className:"w-32 text-right font-bold",children:["₱",a.toLocaleString()]})]},e))})]}),(0,t.jsxs)("div",{className:"bg-white border border-(--gray-light) rounded p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-(--gray-dark) mb-4",children:"Accommodation Performance"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-(--gray-bg) border-b border-(--gray-light)",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left py-2 px-4 font-bold",children:"Accommodation"}),(0,t.jsx)("th",{className:"text-left py-2 px-4 font-bold",children:"Bookings"}),(0,t.jsx)("th",{className:"text-left py-2 px-4 font-bold",children:"Revenue"}),(0,t.jsx)("th",{className:"text-left py-2 px-4 font-bold",children:"Avg/Booking"})]})}),(0,t.jsx)("tbody",{children:Object.entries(u).map(([e,a])=>(0,t.jsxs)("tr",{className:"border-b border-(--gray-light)",children:[(0,t.jsx)("td",{className:"py-3 px-4",children:e}),(0,t.jsx)("td",{className:"py-3 px-4 font-bold",children:a.count}),(0,t.jsxs)("td",{className:"py-3 px-4 font-bold",children:["₱",a.revenue.toLocaleString()]}),(0,t.jsxs)("td",{className:"py-3 px-4",children:["₱",Math.round(a.revenue/a.count).toLocaleString()]})]},e))})]})})]})]})}e.s(["default",()=>l])}]);