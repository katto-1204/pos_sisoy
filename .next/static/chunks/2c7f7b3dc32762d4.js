(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84438,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(56563),r=e.i(47167);function n({selectedClientId:e,onClientSelect:a,clients:n,onClientAdded:o}){let[d,i]=(0,s.useState)(!1),[c,m]=(0,s.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",address:""}),x=async e=>{e.preventDefault();let t=void 0!==r.default&&r.default.env&&1?"http://localhost:3000/api":"";if(t)try{let e={first_name:c.firstName,last_name:c.lastName,email:c.email,phone:c.phoneNumber,address:c.address||""},s=await fetch(`${t}/customers.php?action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){let e=await s.json(),t={id:e&&e.id?String(e.id):Date.now().toString(),...c};try{let e=l.storage.getClients()||[];e.push(t),localStorage.setItem("pos_clients",JSON.stringify(e))}catch{}a(t.id),o(),m({firstName:"",lastName:"",email:"",phoneNumber:"",address:""}),i(!1);return}}catch(e){}let s={id:Date.now().toString(),...c};l.storage.addClient(s),a(s.id),o(),m({firstName:"",lastName:"",email:"",phoneNumber:"",address:""}),i(!1)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-(--gray-dark)",children:"Customer Information"}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"text",placeholder:"First Name",value:c.firstName,onChange:e=>m({...c,firstName:e.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,t.jsx)("input",{type:"text",placeholder:"Last Name",value:c.lastName,onChange:e=>m({...c,lastName:e.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,t.jsx)("input",{type:"email",placeholder:"Email",value:c.email,onChange:e=>m({...c,email:e.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,t.jsx)("input",{type:"tel",placeholder:"Phone Number",value:c.phoneNumber,onChange:e=>m({...c,phoneNumber:e.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,t.jsx)("input",{type:"text",placeholder:"Address",value:c.address,onChange:e=>m({...c,address:e.target.value}),className:"w-full px-3 py-2 border border-(--gray-light) rounded text-sm"}),(0,t.jsx)("button",{onClick:x,className:"w-full py-2 bg-(--yellow) text-(--gray-dark) rounded font-bold text-sm hover:bg-yellow-400",children:"Save Customer"}),(0,t.jsx)("button",{onClick:()=>i(!1),className:"w-full py-2 bg-(--gray-bg) border border-(--gray-light) rounded text-sm",children:"Cancel"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-(--gray-dark) mb-2",children:"Select or Add Customer"}),(0,t.jsxs)("select",{value:e,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-(--gray-light) rounded focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Choose customer..."}),n.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," - ",e.phoneNumber]},e.id))]})]}),(0,t.jsx)("button",{onClick:()=>i(!0),className:"w-full py-2 bg-(--primary-blue) text-white rounded hover:bg-blue-900 text-sm",children:"Add New Customer"})]}),e&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-(--gray-bg) rounded",children:[(0,t.jsx)("p",{className:"text-sm font-bold text-(--primary-blue)",children:"Customer Selected"}),(0,t.jsxs)("p",{className:"text-sm text-(--gray-dark)",children:["ID: ",e]})]})]})}function o({room:e,onClose:a,onConfirm:l}){let[r,n]=(0,s.useState)(!1);return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-blue-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.type})]}),(0,t.jsxs)("div",{className:"space-y-4 border-y border-gray-200 py-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"Guests"}),(0,t.jsxs)("span",{className:"font-bold text-blue-900",children:[e.capacity," maximum"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"Price Per Night"}),(0,t.jsxs)("span",{className:"font-bold text-yellow-500 text-lg",children:["₱",e.pricePerNight]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"Status"}),(0,t.jsx)("span",{className:`font-bold px-3 py-1 rounded text-sm ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:"active"===e.status?"Available":"Maintenance"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-gray-800 mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:a,className:"flex-1 py-2 border border-gray-300 rounded font-bold text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{n(!0),l(e)},className:"flex-1 py-2 bg-yellow-400 rounded font-bold text-blue-900 hover:bg-yellow-500",children:"Select This Room"})]})]})})}function d({checkIn:e,checkOut:a,selectedRoomId:r,onRoomSelect:n}){let[d,i]=(0,s.useState)(null),c=l.storage.getAccommodations(),m=l.storage.getBookings().filter(e=>"cancelled"!==e.status);console.log("[v0] Total accommodations:",c.length),console.log("[v0] All accommodations:",c);let x=c.filter(e=>"Room"===e.type).sort((e,t)=>(Number.parseInt(e.name.split(" ")[1])||0)-(Number.parseInt(t.name.split(" ")[1])||0)),g=c.filter(e=>"Cottage"===e.type&&e.capacity<=5).sort((e,t)=>(Number.parseInt(e.name.split(" ").pop())||0)-(Number.parseInt(t.name.split(" ").pop())||0)),u=c.filter(e=>"Cottage"===e.type&&e.capacity>5).sort((e,t)=>(Number.parseInt(e.name.split(" ").pop())||0)-(Number.parseInt(t.name.split(" ").pop())||0)),h=c.filter(e=>"Villa"===e.type).sort((e,t)=>(Number.parseInt(e.name.split(" ")[1])||0)-(Number.parseInt(t.name.split(" ")[1])||0));console.log("[v0] Rooms:",x.length,x),console.log("[v0] Cottages Regular:",g.length,g),console.log("[v0] Cottages Large:",u.length,u),console.log("[v0] Villas:",h.length,h);let b=({room:s})=>{let l=(t=>{let s=c.find(e=>e.id===t);if(s?.status==="maintenance")return"maintenance";if(!e||!a)return"available";let l=new Date(e),r=new Date(a);return m.some(e=>{if(e.accommodationId!==t)return!1;let s=new Date(e.dateFrom),a=new Date(e.dateTo);return!(r<=s||l>=a)})?"booked":"available"})(s.id),o=r===s.id;return(0,t.jsx)("button",{onClick:()=>{"maintenance"!==l&&(i(s),"available"===l&&n(s.id))},disabled:"maintenance"===l,className:`p-3 rounded-lg transition-all transform hover:scale-105 ${{available:"bg-white border-2 border-gray-300 hover:border-blue-500 hover:shadow-md",booked:"bg-green-500 border-2 border-green-600 text-white",maintenance:"bg-gray-400 border-2 border-gray-500 opacity-70 cursor-not-allowed"}[l]} ${o?"ring-4 ring-yellow-400 ring-offset-2":""}`,children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h4",{className:`text-xl font-bold ${"booked"===l?"text-white":"text-blue-900"}`,children:s.name}),(0,t.jsx)("p",{className:`text-xs ${"booked"===l?"text-white":"text-gray-600"}`,children:s.type}),(0,t.jsxs)("div",{className:`mt-2 flex items-center justify-between text-sm ${"booked"===l?"text-white":""}`,children:[(0,t.jsxs)("span",{className:`font-bold ${"booked"===l?"text-white":"text-blue-600"}`,children:["₱",s.pricePerNight]}),(0,t.jsx)("span",{className:`text-xs font-bold px-2 py-1 rounded ${"available"===l?"bg-gray-100 text-green-600 border border-green-400":"booked"===l?"bg-white text-green-600 font-bold":"bg-gray-600 text-white"}`,children:"available"===l?"FREE":"booked"===l?"✓ BOOKED":"MAINTENANCE"})]}),(0,t.jsxs)("p",{className:`text-xs mt-1 ${"booked"===l?"text-white":"text-gray-600"}`,children:[s.capacity," guests"]})]})})};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-blue-900",children:"Room & Accommodation Availability"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"STANDARD ROOMS"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",x.length,")"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:x.map(e=>(0,t.jsx)(b,{room:e},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"COTTAGES (1-5 PAX)"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",g.length,")"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:g.map(e=>(0,t.jsx)(b,{room:e},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"COTTAGES (15+ PAX)"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",u.length,")"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:u.map(e=>(0,t.jsx)(b,{room:e},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded text-sm font-bold",children:"VILLAS"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["(",h.length,")"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:h.map(e=>(0,t.jsx)(b,{room:e},e.id))})]}),d&&(0,t.jsx)(o,{room:d,onClose:()=>i(null),onConfirm:e=>{n(e.id),i(null)}})]})}function i({checkIn:e,checkOut:s,nights:a,room:l,totalAmount:r}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-blue-900",children:"Booking Summary"}),(0,t.jsxs)("div",{className:"space-y-3 border-b border-gray-200 pb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Check-in"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:e?new Date(e).toLocaleDateString():"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Check-out"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:s?new Date(s).toLocaleDateString():"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Room"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:l?.name||"Not selected"})]})]}),(0,t.jsxs)("div",{className:"space-y-3 border-b border-gray-200 pb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Rate per night"}),(0,t.jsxs)("span",{className:"font-bold text-blue-600",children:["₱",l?.pricePerNight?.toLocaleString()||"0"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Number of nights"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:a})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm bg-yellow-50 px-3 py-2 rounded-lg",children:[(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"Subtotal"}),(0,t.jsxs)("span",{className:"font-bold text-yellow-600",children:["₱",r.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 text-center border border-blue-200",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600 mb-2 uppercase tracking-wide font-medium",children:"Total Amount Due"}),(0,t.jsxs)("p",{className:"text-4xl font-bold text-blue-900",children:["₱",r.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[a," night",1!==a?"s":""]})]})]})}function c(){let e=(0,a.useRouter)(),[r,o]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[b,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{p(l.storage.getClients())},[]);let y=()=>{if(!c||!x)return 0;let e=new Date(c);return Math.floor((new Date(x).getTime()-e.getTime())/864e5)},N=()=>l.storage.getAccommodations().find(e=>e.id===u),f=()=>{let e=N();return e?e.pricePerNight*y():0};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-blue-900",children:"New Booking"}),(0,t.jsx)("button",{onClick:()=>e.back(),className:"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded hover:bg-gray-200 transition-colors",children:"Cancel"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 lg:sticky lg:top-6 lg:h-fit",children:(0,t.jsx)(n,{selectedClientId:r,onClientSelect:o,clients:l.storage.getClients(),onClientAdded:()=>p(l.storage.getClients())})})}),(0,t.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:(0,t.jsx)(d,{checkIn:c,checkOut:x,selectedRoomId:u,onRoomSelect:h})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:"Select Dates"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in Date"}),(0,t.jsx)("input",{type:"date",value:c,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out Date"}),(0,t.jsx)("input",{type:"date",value:x,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,t.jsx)(i,{checkIn:c,checkOut:x,nights:y(),room:N(),totalAmount:f()})})]}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("button",{onClick:()=>{if(!r||!c||!x||!u)return void alert("Please fill all fields and select a room");let t={id:Date.now().toString(),clientId:r,accommodationId:u,dateFrom:c,dateTo:x,status:"pending",totalAmount:f(),createdAt:new Date().toISOString(),paymentStatus:"unpaid"};sessionStorage.setItem("tempBooking",JSON.stringify(t)),e.push(`/booking/payment?bookingId=${t.id}&amount=${t.totalAmount}`)},className:"w-full py-4 bg-yellow-400 text-blue-900 font-bold text-lg rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!r||!c||!x||!u,children:["Proceed to Payment (",y()," nights - ₱",f().toLocaleString(),")"]})})]})]})]})}e.s(["default",()=>c],84438)}]);